(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function h(e){const t=document.createElement("ul");if(e)return e.forEach(n=>{const r=document.createElement("li");r.innerHTML=`
    <p>${n.ingredient}</p>
    <p>${n.quantity!==void 0?n.quantity:"QS"} ${n.unit!==void 0?n.unit:""}</p>
  `,t.append(r)}),t;{const n=document.createElement("li");return n.innerHTML=`
    <p>Aucun ingrédient</p>
   `,t.append(n),t}}function B(){const e=document.createElement("article");e.setAttribute("class","recipe-card");const t=h(this.ingredients);return e.innerHTML=`
  <div class="img-container">
          <img src="./assets/images/${this.image.slice(0,-4)}.webp" alt="Image de la recette ${this.name}">
        </div>
        <div class="recipe-container">
          <h2>${this.name}</h2>
          <h3>Recette</h3>
          <p class="recipe-description">
          ${this.description}
          </p>
          <h3>Ingrédients</h3>
          ${t.outerHTML}
        </div>
        `,e}const T=e=>{const{appliance:t,description:n,id:r,image:s,ingredients:i,name:c,servings:u,time:g,ustensils:p}=e;return{appliance:t,description:n,id:r,image:s,ingredients:i,name:c,servings:u,time:g,ustensils:p,createCard:B,createIngredientList:h}},a=[],b=document.getElementById("search-by-word");function w(e){const t=document.createElement("li");return t.innerText=e,t.addEventListener("click",n=>{const r=n.target.parentElement.id,s=R(e,r);document.getElementById("selected-tag-container").append(s),a.push(e),document.getElementById("ingredient-search-tags-input").value="",document.getElementById("devices-search-tags-input").value="",document.getElementById("utensils-search-tags-input").value="",y(a),n.target.remove()}),t}function R(e,t){const n=document.createElement("div");switch(t){case"ingredients-list":n.setAttribute("class","tag ingredient");break;case"devices-list":n.setAttribute("class","tag devices");break;case"utensils-list":n.setAttribute("class","tag utensils");break;default:n.setAttribute("class","tag");break}return n.innerHTML=`
  <p>${e}</p>
  <p>X</p>
  `,n.addEventListener("click",r=>{if(a.splice(a.indexOf(e),1),a.length===0){const s=b.value;s.length>2?v(s):o()}else y(a);n.remove()}),n}function m(e,t){e.innerHTML="",t.forEach(n=>{e.append(w(n))})}function D(e){const t=document.getElementById("recipes-container");if(t.innerHTML="",e.length===0){const n=document.createElement("p");n.innerText="Aucune recette ne correspond à votre critère… vous pouvez chercher « tarte aux pommes », « poisson », etc.",t.append(n)}else e.sort((r,s)=>r.name.localeCompare(s.name)).forEach(r=>{const s=T(r);t.append(s.createCard())})}function S(e){const t=document.getElementById("recipe-number");t.innerText=e}function W(e){const t=document.getElementById("ingredients-list"),n=new Set;e.forEach(s=>{s.ingredients.forEach(i=>{a.includes(i.ingredient)||n.add(i.ingredient)})});const r=Array.from(n).sort((s,i)=>s.localeCompare(i));m(t,r)}function x(e){const t=document.getElementById("devices-list"),n=new Set;e.forEach(s=>{a.includes(s.appliance)||n.add(s.appliance)});const r=Array.from(n).sort((s,i)=>s.localeCompare(i));m(t,r)}function A(e){const t=document.getElementById("utensils-list"),n=new Set;e.forEach(s=>{s.ustensils.forEach(i=>{a.includes(i)||n.add(i)})});const r=Array.from(n).sort((s,i)=>s.localeCompare(i));m(t,r)}function d(e){D(e),S(e.length),W(e),x(e),A(e)}function C(e,t){return e.filter(n=>{const{ingredients:r,appliance:s,ustensils:i}=n;return t.every(c=>r.some(u=>u.ingredient===c)||s.includes(c)||i.includes(c))})}function O(e,t){const n=new RegExp(t,"gi");return e.filter(r=>{const{name:s,description:i,ingredients:c,appliance:u,ustensils:g}=r;return n.test(s)||n.test(i)||c.some(p=>n.test(p.ingredient))||n.test(u)||n.test(g)})}function M(e,t){const n=new RegExp(t,"gi");return e.filter(r=>{const{ingredients:s}=r;return s.some(i=>n.test(i.ingredient))})}function k(e,t){return e.filter(n=>{const{appliance:r}=n;return regex.test(r)})}function $(e,t){const n=new RegExp(t,"gi");return e.filter(r=>{const{ustensils:s}=r;return n.test(s)})}const H="https://gist.githubusercontent.com/baiello/0a974b9c1ec73d7d0ed7c8abc361fc8e/raw/e598efa6ef42d34cc8d7e35da5afab795941e53e/recipes.json";function l(){return fetch(H).then(e=>e.json()).then(e=>e).catch(e=>e)}function o(){l().then(e=>{d(e)}).catch(e=>e)}function y(e){l().then(t=>{d(C(t,e))}).catch(t=>t)}function v(e){l().then(t=>{d(O(t,e))}).catch(t=>t)}function U(e){l().then(t=>{d(M(t,e))}).catch(t=>t)}function P(e){l().then(t=>{d(k(t))}).catch(t=>t)}function q(e){l().then(t=>{d($(t,e))}).catch(t=>t)}document.addEventListener("DOMContentLoaded",()=>{o()});const j=document.getElementById("search-by-word"),E=document.getElementById("ingredient-search-tags-input"),I=document.getElementById("devices-search-tags-input"),L=document.getElementById("utensils-search-tags-input");j.addEventListener("input",e=>{e.preventDefault();const t=e.target.value;t.length>2?v(t):o()});E.addEventListener("input",e=>{e.preventDefault();const t=e.target.value;t.length>2?U(t):o()});I.addEventListener("input",e=>{e.preventDefault(),e.target.value.length>2?P():o()});L.addEventListener("input",e=>{e.preventDefault();const t=e.target.value;t.length>2?q(t):o()});document.getElementById("clear-ingredients").addEventListener("click",e=>{e.preventDefault(),E.value="",o()});document.getElementById("clear-devices").addEventListener("click",e=>{e.preventDefault(),I.value="",o()});document.getElementById("clear-utensils").addEventListener("click",e=>{e.preventDefault(),L.value="",o()});const z=document.getElementById("displayed-Ingredients-tag-search"),F=document.getElementById("search-ingredients-label"),K=document.getElementById("ingredients-button-wrapper"),N=document.getElementById("displayed-device-tag-search"),Q=document.getElementById("search-devices-label"),X=document.getElementById("devices-button-wrapper"),G=document.getElementById("displayed-utensils-tag-search"),J=document.getElementById("search-utensils-label"),V=document.getElementById("utensils-button-wrapper");F.addEventListener("click",()=>{f(z,K)});Q.addEventListener("click",()=>{f(N,X)});J.addEventListener("click",()=>{f(G,V)});function f(e,t){e.style.display=e.style.display==="block"?"none":"block",t.classList.toggle("turn")}
